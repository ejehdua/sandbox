<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torah Dice Game - Parashat Pinchas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes roll {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .rolling {
            animation: roll 0.5s ease-in-out;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .bounce {
            animation: bounce 0.6s;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-100 min-h-screen font-sans">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8" dir="rtl">
            <h1 class="text-4xl font-bold text-purple-800 mb-2">ğŸ² ××©×—×§ ×§×•×‘×™×•×ª ×ª×•×¨×”</h1>
            <h2 class="text-2xl text-blue-700 mb-4">×¤×¨×©×ª ×¤×™× ×—×¡</h2>
            <div class="bg-white rounded-lg shadow-md p-4 inline-block">
                <p class="text-gray-700">×’×œ×’×œ ××ª ×”×§×•×‘×™×™×” ×›×“×™ ×œ×§×‘×œ ×©××œ×” ×¢×œ ×”×¤×¨×©×”!</p>
                <div class="mt-2">
                    <span class="text-lg font-semibold text-green-600">× ×™×§×•×“: </span>
                    <span id="score" class="text-lg font-bold text-green-700">0</span>
                </div>
            </div>
        </div>

        <!-- Dice Section -->
        <div class="text-center mb-8">
            <div id="dice" class="inline-block bg-gradient-to-br from-white to-gray-100 rounded-2xl shadow-2xl p-12 mb-6 border-4 border-purple-200">
                <div class="text-9xl" id="diceDisplay">ğŸ²</div>
            </div>
            <br>
            <button id="rollButton" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-10 rounded-xl text-2xl shadow-lg transform hover:scale-105 transition-all duration-200" dir="rtl">
                ×’×œ×’×œ ×§×•×‘×™×™×”!
            </button>
        </div>

        <!-- Question Section -->
        <div id="questionSection" class="bg-white rounded-lg shadow-lg p-6 mb-6 hidden" dir="rtl">
            <h3 class="text-xl font-bold text-purple-800 mb-4">×©××œ×”:</h3>
            <p id="questionText" class="text-lg text-gray-800 mb-6 leading-relaxed"></p>
            
            <div class="mb-4">
                <label for="answerInput" class="block text-sm font-medium text-gray-700 mb-2">×”×ª×©×•×‘×” ×©×œ×š:</label>
                <textarea id="answerInput" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none" placeholder="×›×ª×•×‘ ××ª ×”×ª×©×•×‘×” ×©×œ×š ×›××Ÿ..."></textarea>
            </div>
            
            <button id="submitButton" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg shadow-md transform hover:scale-105 transition-all duration-200">
                ×©×œ×— ×ª×©×•×‘×”
            </button>
        </div>

        <!-- Feedback Section -->
        <div id="feedbackSection" class="rounded-lg p-6 mb-6 hidden" dir="rtl">
            <div id="feedbackContent"></div>
            <button id="nextButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow-md mt-4 transform hover:scale-105 transition-all duration-200">
                ×’×œ×’×œ ×©×•×‘
            </button>
        </div>

        <!-- Instructions -->
        <div class="text-center">
            <button id="instructionsButton" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transform hover:scale-105 transition-all duration-200" dir="rtl">
                ××™×š ×œ×©×—×§?
            </button>
        </div>
        
        <div id="instructionsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6" dir="rtl">
                    <h4 class="font-bold text-yellow-800 mb-4 text-xl">××™×š ×œ×©×—×§:</h4>
                    <ul class="text-gray-700 space-y-2 mb-6">
                        <li>1. ×œ×—×¥ ×¢×œ "×’×œ×’×œ ×§×•×‘×™×™×”" ×›×“×™ ×œ×§×‘×œ ×©××œ×” ××§×¨××™×ª</li>
                        <li>2. ×§×¨× ××ª ×”×©××œ×” ×‘×¢×™×•×Ÿ</li>
                        <li>3. ×›×ª×•×‘ ××ª ×”×ª×©×•×‘×” ×©×œ×š ×‘×ª×™×‘×ª ×”×˜×§×¡×˜</li>
                        <li>4. ×œ×—×¥ ×¢×œ "×©×œ×— ×ª×©×•×‘×”" ×›×“×™ ×œ×¨××•×ª ×× ××ª×” ×¦×•×“×§</li>
                        <li>5. ×¦×‘×•×¨ × ×§×•×“×•×ª ×¢×‘×•×¨ ×ª×©×•×‘×•×ª × ×›×•× ×•×ª!</li>
                    </ul>
                    <button id="closeInstructions" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg w-full">
                        ×¡×’×•×¨
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game data
        const questions = [
            {
                question: "××™ ×”×™×” ×¤×™× ×—×¡ ×•××” ×”×•× ×¢×©×” ×›×“×™ ×œ×§×‘×œ ×‘×¨×™×ª ×©×œ×•×?",
                expected_keywords: ["×¤×™× ×—×¡", "×–××¨×™", "×›×–×‘×™", "××’×¤×”", "×©×œ×•×", "×‘×¨×™×ª", "×”×¨×’", "×¢×¦×¨"],
                correct_answer: "×¤×™× ×—×¡ ×”×¨×’ ××ª ×–××¨×™ ×•×›×–×‘×™ ×•×¢×¦×¨ ××ª ×”××’×¤×”. ××œ×•×”×™× ×’××œ ×œ×• ×‘×‘×¨×™×ª ×©×œ×•×."
            },
            {
                question: "××™×–×” ×©×›×¨ ×§×™×‘×œ ×¤×™× ×—×¡ ×¢×œ ××¢×©×™×•?",
                expected_keywords: ["×‘×¨×™×ª", "×©×œ×•×", "× ×¦×—", "×›×”×•× ×”", "×¢×•×œ×", "×©×›×¨"],
                correct_answer: "×”×•× ×§×™×‘×œ ×‘×¨×™×ª ×©×œ×•× ×•×›×”×•× ×ª ×¢×•×œ×."
            },
            {
                question: "××” ×¢×©×• ×‘× ×•×ª ×¦×œ×¤×—×“ ×‘×¤×¨×©×” ×–×•?",
                expected_keywords: ["× ×—×œ×”", "××“××”", "×‘×§×©×”", "××©×”", "×¦×œ×¤×—×“", "×‘× ×•×ª", "×œ×¨×©×ª", "×‘× ×™×"],
                correct_answer: "×”×Ÿ ×‘×™×§×©×• ××ª ×”×–×›×•×ª ×œ×¨×©×ª ××ª ××“××ª ××‘×™×”×Ÿ ××›×™×•×•×Ÿ ×©×œ× ×”×™×• ×œ×• ×‘× ×™×, ×•××œ×•×”×™× ×”×¡×›×™×."
            },
            {
                question: "×œ××” ×”×™×™×ª×” ××’×¤×” ×‘×™×Ÿ ×‘× ×™ ×™×©×¨××œ ×‘×¤×¨×©×” ×–×•?",
                expected_keywords: ["×‘×¢×œ", "×¤×¢×•×¨", "××•××‘×™×ª", "××“×™× ×™×ª", "× ×©×™×", "×¢×‘×•×“×” ×–×¨×”", "×—×˜×"],
                correct_answer: "×‘× ×™ ×™×©×¨××œ ×—×˜××• ×‘×¢×‘×•×“×ª ×‘×¢×œ ×¤×¢×•×¨ ×•×‘×§×¨×‘×” ×¢× × ×©×™× ××•××‘×™×•×ª ×•××“×™× ×™×•×ª."
            },
            {
                question: "××” ×”×™×” ××™×•×—×“ ×‘××¤×§×“ ×©× ×¢×¨×š ×‘×¤×¨×©×” ×–×•?",
                expected_keywords: ["××¤×§×“", "×¡×¤×™×¨×”", "××“××”", "× ×—×œ×”", "×©×‘×˜×™×", "×—×œ×•×§×”", "×—×œ×§×™×"],
                correct_answer: "×”××¤×§×“ ×”×–×” × ×¢×¨×š ×›×“×™ ×œ×§×‘×•×¢ ××™×š ×ª×ª×—×œ×§ ××¨×¥ ×”×§×•×“×© ×‘×™×Ÿ ×”×©×‘×˜×™×."
            },
            {
                question: "××” ×§×¨×” ×œ××©×” ×‘× ×•×’×¢ ×œ××¨×¥ ×”×§×•×“×© ×‘×¤×¨×©×” ×–×•?",
                expected_keywords: ["××©×”", "×”×¨", "×¨××”", "××“××”", "××ª", "×™×”×•×©×¢", "×× ×”×™×’"],
                correct_answer: "××œ×•×”×™× ×××¨ ×œ××©×” ×œ×¢×œ×•×ª ×œ×”×¨ ×¢×‘×¨×™× ×›×“×™ ×œ×¨××•×ª ××ª ××¨×¥ ×”×§×•×“×© ×œ×¤× ×™ ××•×ª×•, ×•×œ×× ×•×ª ××ª ×™×”×•×©×¢ ×›×× ×”×™×’ ×”×—×“×©."
            }
        ];

        // Game state
        let currentQuestion = null;
        let score = 0;
        let usedQuestions = [];

        // DOM elements
        const rollButton = document.getElementById('rollButton');
        const dice = document.getElementById('dice');
        const diceDisplay = document.getElementById('diceDisplay');
        const questionSection = document.getElementById('questionSection');
        const questionText = document.getElementById('questionText');
        const answerInput = document.getElementById('answerInput');
        const submitButton = document.getElementById('submitButton');
        const feedbackSection = document.getElementById('feedbackSection');
        const feedbackContent = document.getElementById('feedbackContent');
        const nextButton = document.getElementById('nextButton');
        const scoreDisplay = document.getElementById('score');
        const instructionsButton = document.getElementById('instructionsButton');
        const instructionsModal = document.getElementById('instructionsModal');
        const closeInstructions = document.getElementById('closeInstructions');

        // Dice faces
        const diceFaces = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];

        // Event listeners
        rollButton.addEventListener('click', rollDice);
        submitButton.addEventListener('click', submitAnswer);
        nextButton.addEventListener('click', resetForNextRound);
        instructionsButton.addEventListener('click', () => instructionsModal.classList.remove('hidden'));
        closeInstructions.addEventListener('click', () => instructionsModal.classList.add('hidden'));
        instructionsModal.addEventListener('click', (e) => {
            if (e.target === instructionsModal) instructionsModal.classList.add('hidden');
        });
        answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                submitAnswer();
            }
        });

        function rollDice() {
            // Add rolling animation
            dice.classList.add('rolling');
            rollButton.disabled = true;
            rollButton.textContent = '××’×œ×’×œ...';

            // Animate dice faces
            let rollCount = 0;
            const rollInterval = setInterval(() => {
                const randomFace = diceFaces[Math.floor(Math.random() * 6)];
                diceDisplay.textContent = randomFace;
                rollCount++;
                
                if (rollCount >= 8) {
                    clearInterval(rollInterval);
                    finishRoll();
                }
            }, 100);
        }

        function finishRoll() {
            // Final dice result
            const diceResult = Math.floor(Math.random() * 6) + 1;
            diceDisplay.textContent = diceFaces[diceResult - 1];
            
            // Remove rolling animation
            dice.classList.remove('rolling');
            dice.classList.add('bounce');
            
            setTimeout(() => {
                dice.classList.remove('bounce');
                showQuestion();
            }, 600);
        }

        function showQuestion() {
            // Reset used questions if all have been used
            if (usedQuestions.length >= questions.length) {
                usedQuestions = [];
            }

            // Get a random unused question
            let availableQuestions = questions.filter((_, index) => !usedQuestions.includes(index));
            const randomIndex = Math.floor(Math.random() * availableQuestions.length);
            const questionIndex = questions.indexOf(availableQuestions[randomIndex]);
            
            currentQuestion = questions[questionIndex];
            usedQuestions.push(questionIndex);

            // Display question
            questionText.textContent = currentQuestion.question;
            questionSection.classList.remove('hidden');
            answerInput.value = '';
            answerInput.focus();

            // Hide feedback and reset button
            feedbackSection.classList.add('hidden');
            rollButton.textContent = '×’×œ×’×œ ×§×•×‘×™×™×”!';
            rollButton.disabled = false;
        }

        function submitAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            
            if (!userAnswer) {
                alert('×× × ×”×›× ×¡ ×ª×©×•×‘×” ×œ×¤× ×™ ×”×©×œ×™×—×”!');
                return;
            }

            // Check if answer contains expected keywords
            const keywordMatches = currentQuestion.expected_keywords.filter(keyword => 
                userAnswer.includes(keyword.toLowerCase())
            );

            const isCorrect = keywordMatches.length >= 2; // Need at least 2 keywords for correct answer

            // Show feedback
            showFeedback(isCorrect, keywordMatches);
        }

        function showFeedback(isCorrect, keywordMatches) {
            feedbackSection.classList.remove('hidden');
            
            if (isCorrect) {
                score += 10;
                scoreDisplay.textContent = score;
                feedbackSection.className = 'bg-green-100 border border-green-400 rounded-lg p-6 mb-6';
                feedbackContent.innerHTML = `
                    <div class="text-green-800" dir="rtl">
                        <h4 class="font-bold text-lg mb-2">âœ… × ×›×•×Ÿ! ×›×œ ×”×›×‘×•×“!</h4>
                        <p class="mb-2">×–×›×™×ª ×‘-10 × ×§×•×“×•×ª!</p>
                        <p class="text-sm"><strong>××•×©×’×™ ××¤×ª×— ×©×”×–×›×¨×ª:</strong> ${keywordMatches.join(', ')}</p>
                    </div>
                `;
            } else {
                feedbackSection.className = 'bg-red-100 border border-red-400 rounded-lg p-6 mb-6';
                feedbackContent.innerHTML = `
                    <div class="text-red-800" dir="rtl">
                        <h4 class="font-bold text-lg mb-2">âŒ ×œ× ×‘×“×™×•×§ × ×›×•×Ÿ</h4>
                        <p class="mb-3"><strong>×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×:</strong></p>
                        <p class="bg-white p-3 rounded border italic">${currentQuestion.correct_answer}</p>
                        ${keywordMatches.length > 0 ? `<p class="text-sm mt-2"><strong>×›×Ÿ ×”×–×›×¨×ª:</strong> ${keywordMatches.join(', ')}</p>` : ''}
                    </div>
                `;
            }

            // Scroll to feedback
            feedbackSection.scrollIntoView({ behavior: 'smooth' });
        }

        function resetForNextRound() {
            questionSection.classList.add('hidden');
            feedbackSection.classList.add('hidden');
            diceDisplay.textContent = 'ğŸ²';
        }

        // Initialize score display
        scoreDisplay.textContent = score;
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9625252ee30c8e45',t:'MTc1MzA0MjY4MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
